<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>tgot</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
	<style type="text/css">
		.main{
			margin: auto;
			max-width: 20rem;
		}
	</style>
</head>
<body>
	<main class="main">
		<div class="p-2">
			<h4>Client ID</h4>
			<input type="text" class="form-control" id="clientid" placeholder="application clientid">
		</div>
		<div class="p-2" id="scopesDiv">
			<h4>Scopes</h4>
			<div class="form-check">
			  <input class="form-check-input" type="checkbox" value="" id="user_details_self" checked>
			  <label class="form-check-label" for="user_details_self">user_details_self</label>
			</div>
			<div class="form-check">
			  <input class="form-check-input" type="checkbox" value="" id="channel_details_self" checked>
			  <label class="form-check-label" for="channel_details_self">channel_details_self</label>
			</div>
			<div class="form-check">
			  <input class="form-check-input" type="checkbox" value="" id="channel_update_self" checked>
			  <label class="form-check-label" for="channel_update_self">channel_update_self</label>
			</div>
			<div class="form-check">
			  <input class="form-check-input" type="checkbox" value="" id="channel_subscriptions" checked>
			  <label class="form-check-label" for="channel_subscriptions">channel_subscriptions</label>
			</div>
			<div class="form-check">
			  <input class="form-check-input" type="checkbox" value="" id="chat_send_self" checked>
			  <label class="form-check-label" for="chat_send_self">chat_send_self</label>
			</div>
			<div class="form-check">
			  <input class="form-check-input" type="checkbox" value="" id="send_to_my_channel" checked>
			  <label class="form-check-label" for="send_to_my_channel">send_to_my_channel</label>
			</div>
			<div class="form-check">
			  <input class="form-check-input" type="checkbox" value="" id="manage_messages" checked>
			  <label class="form-check-label" for="manage_messages">manage_messages</label>
			</div>
		</div>
		<div class="p-2 d-grid">
			<button class="btn btn-primary" id="loginBtn">Login</button>
		</div>
		<script type="text/javascript">
			let ci=document.getElementById('clientid');
			let sd=document.getElementById('scopesDiv');
			let checkboxes=sd.querySelectorAll('input');
			let btn=document.getElementById('loginBtn');
			window.cbm=new Map();

			for(let i of checkboxes){
				i.addEventListener('change',ontoggle);
				cbm.set(i.id,i.checked);
			}

			function ontoggle(){
				cbm.set(this.id,this.checked);
			}

			btn.addEventListener('click',function(){
				let scope;
				for(let i of map){
					if(i[1])
						scope+=i[0]+'+';
				}
				scope=scope.slice(0,scope.length-1);
				let url=`https://open.trovo.live/page/login.html?client_id=${ci.value}&response_type=code&scope=${scope}&redirect_uri=https%3A%2F%2Ftrovo.live&state=${Math.random()*10**8}`;
				window.location.replace(url);
			});
		</script>
	</main>
</body>
</html>
